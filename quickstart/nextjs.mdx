---
title: "Autumn with Next.js"
sidebarTitle: "Next.js"
sidebar_position: 1
description: "Implement pricing & billing in your Next.js application"
---

Create your [Autumn account](https://app.useautumn.com/) and let's create a the pricing for a premium AI chatbot.

We're going to charge users **$20 per month for 10 messages**.

## 1. Create the product

Create a product in the [Products](https://app.useautumn.com/products) tab.

<Steps>
  <Step>
  <Accordion title="Create the Product">
    Click on the "+ Product" button and name the product "Pro".
    <Frame className="bg-transparent items-center gap-4 bg-[#fafafa]">
      <img
        src="/assets/quickstart/create-pro.png"

      />
    </Frame>
    </Accordion>

  </Step>
  <Step>
  <Accordion title="Create the Messages Feature">
  Click the "+ Feature" button, and in the feature list, select "Create new feature".

  <Frame className="bg-transparent items-center gap-4 bg-[#fafafa]">
  <img src="/assets/quickstart/messages.png" />
  </Frame>
  </Accordion>
  </Step>
  <Step>
  <Accordion title="Add the Product Items">
  Back on the products page, create a new product and name it "Pro". Click "+ Feature" and add a limit of 10 messages per month.
  
  Then click "+ Price" and a price of $20 per month.
  <Frame className="bg-transparent items-center gap-4 bg-[#fafafa]">
  <img src="/assets/quickstart/messages-item.png" className="" />
  <img src="/assets/quickstart/price.png" className="" />
  </Frame>
  </Accordion>
  </Step>
</Steps>

## 2. Install `autumn-js`

```bash npm
npm install autumn-js
```

## 3. Set up `<AutumnProvider>`

Wrap your application with the `<AutumnProvider>` component in your root layout.tsx file. This sets the the `customer_id` for the current user across your application.

```javascript
// app/layout.tsx

import { AutumnProvider } from "autumn-js/next";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode,
}) {
  return (
    <html>
      <body>
        <AutumnProvider
          customerId="YOUR_CUSTOMER_ID"
          customerData={{ name: "John Doe" }}
        >
          {children}
        </AutumnProvider>
      </body>
    </html>
  );
}
```

<Note>
  Your layout file must be a server component (as it is by default in Next.js).
</Note>

## 4. Integrate Autumn

From our application's frontend, whenever a customer wants to send a chatbot messages, we'll first check if they're allowed to.

If they are, we'll send a usage event to Autumn. Autumn will then update the customer's usage and remaining balance.

When they click the "Upgrade to Pro" button, they'll be redirected to a Stripe checkout page to subscribe.

```javascript
// app/chatbot/page.tsx
"use client";

import { useAutumn } from "autumn-js/next";

export default function BillingPage() {
  const { customer, attach, entitled, sendEvent } = useAutumn();

  return (
    <div>
      <h1>Welcome {customer?.name}</h1>
      {/* Redirect to Stripe checkout page */}
      <button onClick={() => attach({ productId: "pro" })}>
        Upgrade to Pro
      </button>
      <button
        onClick={async () => {
          // Check if the customer is entitled to send a message
          let { allowed } = await entitled({ featureId: "messages" });

          if (allowed) {
            // Send a usage event to Autumn
            await event({ featureId: "messages" });
          } else {
            alert("You don't have access to this feature");
          }
        }}
      >
        Send message
      </button>
    </div>
  );
}
```

<Check>
  Autumn will automatically create a customer if the customer ID is new.
</Check>

<Warning>
  Make sure you've pasted in your [Stripe test secret
  key](https://dashboard.stripe.com/test/apikeys) `sk_test_...` in the [Autumn
  dashboard](https://app.useautumn.com/integrations/stripe).
</Warning>

{" "}
