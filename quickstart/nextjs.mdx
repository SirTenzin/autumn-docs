---
title: "Autumn with Next.js"
sidebarTitle: "Get Started"
description: "Implement pricing & billing in your Next.js application"
---

Create your [Autumn account](https://app.useautumn.com/) and let's create the pricing for a premium AI chatbot.

We're going to charge users **$20 per month for 10 messages**.

## 1. Create the product

Create a product in the [Products](https://app.useautumn.com/products) tab.

<Steps>
  <Step>
  <Accordion title="Create the Product">
    Click on the "+ Product" button and name the product "Pro".
    <Frame className="bg-transparent items-center gap-4 bg-[#fafafa]">
      <img
        src="/assets/quickstart/create-pro.png"

      />
    </Frame>
    </Accordion>

  </Step>
  <Step>
  <Accordion title="Create the Messages Feature">
  Click the "+ Feature" button, and in the feature list, select "Create new feature".

  <Frame className="bg-transparent items-center gap-4 bg-[#fafafa]">
  <img src="/assets/quickstart/messages.png" />
  </Frame>
  </Accordion>
  </Step>
  <Step>
  <Accordion title="Add the Product Items">
  Back on the products page, create a new product and name it "Pro". Click "+ Feature" and add a limit of 10 messages per month.
  
  Then click "+ Price" and a price of $20 per month.
  <Frame className="bg-transparent items-center gap-4 bg-[#fafafa]">
  <img src="/assets/quickstart/messages-item.png" className="" />
  <img src="/assets/quickstart/price.png" className="" />
  </Frame>
  </Accordion>
  </Step>
</Steps>

## 2. Install `autumn-js`

```bash npm
npm install autumn-js
```

## 3. Add your Autumn secret key

Create an [Autumn Secret API key](https://app.useautumn.com/dev) from the dashboard, and add it to your `.env` file.

```
AUTUMN_SECRET_KEY=am_sk_1234567890
```

## 4. Set up `<AutumnProvider>`

Wrap your application with the `<AutumnProvider>` component in your root layout.tsx file. This sets the the `customer_id` for the current user across your application.

<Tip>
  Autumn provides native integrations with common auth libraries, like
  better-auth, Clerk and Supabase Auth
</Tip>

```javascript
// app/layout.tsx

import { AutumnProvider } from "autumn-js/next";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode,
}) {
  return (
    <html>
      <body>
        <AutumnProvider
          customerId="YOUR_CUSTOMER_ID"
          customerData={{ name: "John Doe" }}
        >
          {children}
        </AutumnProvider>
      </body>
    </html>
  );
}
```

<Note>
  Your layout file must be a server component (as it is by default in Next.js).
</Note>

## 5. Integrate Autumn

There are 3 main functions you need to integrate Autumn into your application.

<Steps>
  <Step>
    When the customer clicks the "Upgrade to Pro" button, we call `attach()` to
    redirect them to a Stripe checkout page.
  </Step>
  <Step>
    When the customer wants to use a chatbot message, we call `check()` to check
    if they have remaining messages and are allowed to send one.
  </Step>
  <Step>If they are, we call `track()` to send a usage event to Autumn.</Step>
</Steps>

<Warning>
  Make sure you've pasted in your [Stripe test secret
  key](https://dashboard.stripe.com/test/apikeys) `sk_test_...` in the [Autumn
  dashboard](https://app.useautumn.com/integrations/stripe).
</Warning>

```javascript
// app/chatbot/page.tsx
"use client";

import { useAutumn, useCustomer } from "autumn-js/next";

export default function BillingPage() {
  const { attach, check, track } = useAutumn();
  const { customer } = useCustomer();

  return (
    <div>
      <h1>Welcome {customer?.name}</h1>
      <button
        onClick={() => {
          // Redirect to Stripe checkout page
          attach({ productId: "pro" });
        }}
      >
        Upgrade to Pro
      </button>
      <button
        onClick={async () => {
          // Check if the customer is allowed to send a message
          let { allowed } = await check({ featureId: "messages" });

          // Send a usage event to Autumn if allowed
          if (allowed) {
            await track({ featureId: "messages" });
          } else {
            alert("You don't have access to any more messages");
          }
        }}
      >
        Send message
      </button>
    </div>
  );
}
```

<Check>
  Autumn will automatically create a customer if the customer ID is new.
</Check>

## 6. Congrats!

You've now integrated Autumn into your Next.js application. You can now plug in [Autumn's shadcn/ui components](/quickstart/ui-components) to handle things like upgrades/downgrades, paywalls and pricing table.
